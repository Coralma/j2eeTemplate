'use strict';
angular.module('cccis.angular.common.components.dialog').controller('cccisAlertCtrl', ['$scope', 'content', function ($scope, content) {
    $scope.content = content;
    $scope.result = null;
    $scope.closeAlert = function () {
        $scope.result = true;
        $scope.dialogApi.close();
    }
}]);
angular.module('cccis.angular.common.components.dialog').controller('cccisAppErrorDialogCtrl', ['$scope', 'content', function ($scope, content) {
    $scope.content = content;
    $scope.result = null;
    $scope.closeAlert = function () {
        $scope.result = true;
        $scope.dialogApi.close();
    }
}]);
angular.module('cccis.angular.common.components.dialog').controller('cccisConfirmCtrl', ['$scope', 'content', 'data', function ($scope, content, data) {
    $scope.content = content;
    $scope.data = data;
    $scope.result = null;
    $scope.confirm = function () {
        $scope.result = true;
        $scope.dialogApi.close();
    };
    $scope.cancel = function () {
        $scope.result = false;
        $scope.dialogApi.close();
    };
}]);
angular.module('cccis.angular.common.components.dialog').factory('cccisCommonDialogProvider', ['cccisDialogProvider','$q', function (cccisDialogProvider,$q) {
    return {
        alert: function (content, dialogOptions) {
            var defered = $q.defer();
            cccisDialogProvider.openDialog({
                    templateUrl: 'common/components/dialog/dialog-alert.tpl.html',
                    controllerName: 'cccisAlertCtrl',
                    resolves: {
                        content: content
                    },
                    options: {
                        title: dialogOptions == null || dialogOptions.title == null ? '' : dialogOptions.title,
                        width: dialogOptions == null || dialogOptions.width == null ? '400px' : dialogOptions.width,
                        height: dialogOptions == null || dialogOptions.height == null ? '180px' : dialogOptions.height,
                        modal: true,
                        collapsible: dialogOptions == null || dialogOptions.title == null ? false : dialogOptions.collapsible,
                        enableDrag: dialogOptions == null || dialogOptions.enableDrag == null ? true : dialogOptions.enableDrag,
                        sizeType: dialogOptions == null || dialogOptions.sizeType == null ? 'small' : dialogOptions.sizeType,
                        dialogCls: 'cccis-common-dialog cccis-alert-dialog'
                    }
                }).then(function ($dialogScope) {
                     $dialogScope.onDialogClose = function(){
                         defered.resolve($dialogScope.result);
                     }
            });
                return defered.promise;
        },
        confirm: function (content, dialogOptions, data) {
            var defered = $q.defer();
            dialogOptions = dialogOptions || {};
            cccisDialogProvider.openDialog({
                templateUrl: 'common/components/dialog/dialog-confirm.tpl.html',
                controllerName: 'cccisConfirmCtrl',
                options: angular.extend({
                    title: dialogOptions == null || dialogOptions.title == null ? '' : dialogOptions.title,
                    width: dialogOptions == null || dialogOptions.width == null ? '400px' : dialogOptions.width,
                    height: dialogOptions == null || dialogOptions.height == null ? '180px' : dialogOptions.height,
                    modal: true,
                    collapsible: dialogOptions == null || dialogOptions.title == null ? false : dialogOptions.collapsible,
                    enableDrag: dialogOptions == null || dialogOptions.enableDrag == null ? true : dialogOptions.enableDrag,
                    sizeType: dialogOptions == null || dialogOptions.sizeType == null ? 'small' : dialogOptions.sizeType,
                    dialogCls: 'cccis-common-dialog cccis-confirm-dialog'
                }, dialogOptions),
                resolves: {
                    data: angular.extend({}, data),
                    content: content
                }
            }).then(function($dialogScope){
                $dialogScope.onDialogClose = function(){
                    defered.resolve($dialogScope.result);
                }
            });
            return defered.promise;
        },

        showAppErrorDialog: function (content, dialogOptions) {
            return cccisDialogProvider.openDialog({
                    templateUrl: 'common/components/dialog/dialog-alert.tpl.html',
                    controllerName: 'cccisAppErrorDialogCtrl',
                    resolves: {
                        content: content
                    },
                    options: {
                        title: dialogOptions == null || dialogOptions.title == null ? '注意' : dialogOptions.title,
                        width: dialogOptions == null || dialogOptions.width == null ? '400px' : dialogOptions.width,
                        height: dialogOptions == null || dialogOptions.height == null ? '180px' : dialogOptions.height,
                        modal: true,
                        collapsible: dialogOptions == null || dialogOptions.title == null ? false : dialogOptions.collapsible,
                        enableDrag: dialogOptions == null || dialogOptions.enableDrag == null ? true : dialogOptions.enableDrag,
                        sizeType: dialogOptions == null || dialogOptions.sizeType == null ? 'small' : dialogOptions.sizeType,
                        dialogCls: 'cccis-common-dialog cccis-alert-dialog',
                    }
                }
            );
        },
    }
}]);